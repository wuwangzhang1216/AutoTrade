# AutoTrade AI ç³»ç»Ÿæ¶æ„ä¸æµç¨‹åˆ†æ

> ç”Ÿæˆæ—¶é—´ï¼š2025-11-07
> åˆ†æèŒƒå›´ï¼šå®Œæ•´äº¤æ˜“ç³»ç»Ÿæ¶æ„ã€å†³ç­–æµç¨‹ã€é—®é¢˜è¯Šæ–­ã€æ”¹è¿›å»ºè®®

---

## ğŸ“‹ ç›®å½•

1. [ç³»ç»Ÿæ•´ä½“æ¶æ„](#1-ç³»ç»Ÿæ•´ä½“æ¶æ„)
2. [å®Œæ•´äº¤æ˜“æµç¨‹](#2-å®Œæ•´äº¤æ˜“æµç¨‹)
3. [AIå†³ç­–æœºåˆ¶è¯¦è§£](#3-aiå†³ç­–æœºåˆ¶è¯¦è§£)
4. [å½“å‰é…ç½®åˆ†æ](#4-å½“å‰é…ç½®åˆ†æ)
5. [é—®é¢˜è¯Šæ–­](#5-é—®é¢˜è¯Šæ–­)
6. [ä¸ä¸“ä¸šé‡åŒ–äº¤æ˜“å¯¹æ¯”](#6-ä¸ä¸“ä¸šé‡åŒ–äº¤æ˜“å¯¹æ¯”)
7. [æ”¹è¿›å»ºè®®](#7-æ”¹è¿›å»ºè®®)

---

## 1. ç³»ç»Ÿæ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        å‰ç«¯ (Frontend)                           â”‚
â”‚  React + TypeScript + TailwindCSS + Framer Motion              â”‚
â”‚  - Dashboard (è´¦æˆ·çŠ¶æ€ã€æŒä»“ã€PnL)                               â”‚
â”‚  - å®æ—¶å›¾è¡¨ (lightweight-charts)                                 â”‚
â”‚  - WebSocket å®æ—¶æ›´æ–°                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚ HTTP/REST API + WebSocket
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    åç«¯ API (Backend)                            â”‚
â”‚  FastAPI (Python) - uvicorn --workers=2                         â”‚
â”‚  - REST API endpoints (/api/account, /api/positions...)        â”‚
â”‚  - WebSocket (/ws) å®æ—¶æ¨é€                                      â”‚
â”‚  - AI Scheduler (åå°çº¿ç¨‹ï¼Œæ–‡ä»¶é”é˜²é‡å¤)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚              â”‚              â”‚
       â–¼              â–¼              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ•°æ®åº“      â”‚ â”‚ å¸‚åœºæ•°æ® â”‚ â”‚   AI å†³ç­–å¼•æ“            â”‚
â”‚ PostgreSQL  â”‚ â”‚  CCXT    â”‚ â”‚  OpenRouter API         â”‚
â”‚             â”‚ â”‚ (Kraken) â”‚ â”‚  - DeepSeek Chat v3.1   â”‚
â”‚ - Trades    â”‚ â”‚          â”‚ â”‚  - Qwen3 VL 235B        â”‚
â”‚ - Decisions â”‚ â”‚          â”‚ â”‚                         â”‚
â”‚ - Snapshots â”‚ â”‚          â”‚ â”‚  åŒæ¨¡å‹å¹¶è¡Œ + æŠ•ç¥¨æœºåˆ¶    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒç»„ä»¶

1. **æ•°æ®å±‚** (`backend/data/`)
   - `MarketDataCollector`: é€šè¿‡ CCXT è·å–å®æ—¶ä»·æ ¼ã€OHLCV æ•°æ®
   - ä½¿ç”¨ Kraken äº¤æ˜“æ‰€ API

2. **åˆ†æå±‚** (`backend/analysis/`)
   - `TechnicalAnalyzer`: æŠ€æœ¯æŒ‡æ ‡è®¡ç®— (MA, MACD, RSI, BB, ATR)
   - `FundamentalAnalyzer`: åŸºæœ¬é¢æ•°æ® (ææ…Œè´ªå©ªæŒ‡æ•°ã€æ–°é—»æƒ…ç»ª)

3. **AI å†³ç­–å±‚** (`backend/ai/`)
   - `AIDecisionEngine`: åŒæ¨¡å‹å†³ç­–å¼•æ“
   - `OpenRouterClient`: AI API å®¢æˆ·ç«¯
   - æŠ•ç¥¨ç­–ç•¥ï¼šmajority / unanimous / weighted

4. **äº¤æ˜“å¼•æ“** (`backend/core/`)
   - `TradingEngine`: æ¨¡æ‹Ÿäº¤æ˜“æ‰§è¡Œã€æŒä»“ç®¡ç†ã€é£é™©æ§åˆ¶
   - æ”¯æŒæ æ†äº¤æ˜“ã€å¤šç©ºåŒå‘ã€åŒå‘åŠ ä»“

5. **æ•°æ®æŒä¹…åŒ–** (`backend/database/`)
   - `Trade`: äº¤æ˜“è®°å½•
   - `AIDecision`: AI å†³ç­–è®°å½•
   - `AccountSnapshot`: è´¦æˆ·å¿«ç…§ï¼ˆç”¨äºé‡å¯æ¢å¤ï¼‰

---

## 2. å®Œæ•´äº¤æ˜“æµç¨‹

### 2.1 å¯åŠ¨æµç¨‹

```
1. API æœåŠ¡å¯åŠ¨ (uvicorn --workers=2)
   â””â”€> é¦–æ¬¡è¯·æ±‚è§¦å‘ AI Scheduler åˆå§‹åŒ– (é¿å…å¯åŠ¨è¶…æ—¶)
       â””â”€> æ£€æŸ¥ ENABLE_AI_SCHEDULER ç¯å¢ƒå˜é‡
           â”œâ”€> true: å¯åŠ¨ AI è°ƒåº¦å™¨
           â”‚   â””â”€> æ–‡ä»¶é”æœºåˆ¶ (/tmp/ai_scheduler.lock)
           â”‚       â””â”€> åªæœ‰ä¸€ä¸ª worker è¿è¡Œè°ƒåº¦å™¨
           â””â”€> false: ä¸å¯åŠ¨ (ç”Ÿäº§ç¯å¢ƒé»˜è®¤)

2. ä»æ•°æ®åº“æ¢å¤çŠ¶æ€
   â”œâ”€> æ¢å¤èµ„é‡‘ (capital, total_trades, win_rate)
   â””â”€> æ¢å¤æŒä»“ (positions, margin)
```

### 2.2 AI å†³ç­–å‘¨æœŸ (æ¯5åˆ†é’Ÿ)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AI Decision Scheduler (é—´éš”: 5åˆ†é’Ÿï¼Œå¯é…ç½®)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  éå†äº¤æ˜“å¯¹ (BTC, ETH, SOL)    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  1. æ•°æ®æ”¶é›† (analyze_symbol)                      â”‚
        â”‚     - è·å–å½“å‰ä»·æ ¼                                 â”‚
        â”‚     - è·å– OHLCV æ•°æ® (200æ ¹Kçº¿)                   â”‚
        â”‚     - è®¡ç®—æŠ€æœ¯æŒ‡æ ‡                                 â”‚
        â”‚     - è·å–åŸºæœ¬é¢æ•°æ®                               â”‚
        â”‚     - è·å–å¸‚åœºæƒ…ç»ª                                 â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  2. AI å†³ç­– (make_ai_decision)                     â”‚
        â”‚                                                    â”‚
        â”‚  2.1 æ„å»ºä¸Šä¸‹æ–‡                                    â”‚
        â”‚      - è´¦æˆ·çŠ¶æ€ (èµ„é‡‘ã€PnLã€èƒœç‡)                  â”‚
        â”‚      - å½“å‰æŒä»“ (å¦‚æœ‰ï¼Œå« PnLã€æ¸…ç®—ä»·)             â”‚
        â”‚      - å†å²å†³ç­–                                    â”‚
        â”‚                                                    â”‚
        â”‚  2.2 åŒæ¨¡å‹å¹¶è¡Œå†³ç­–                                â”‚
        â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
        â”‚      â”‚  ThreadPoolExecutor (max_workers=2) â”‚      â”‚
        â”‚      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚      â”‚
        â”‚      â”‚  â”‚  Model 1     â”‚  â”‚  Model 2     â”‚ â”‚      â”‚
        â”‚      â”‚  â”‚  DeepSeek    â”‚  â”‚  Qwen3       â”‚ â”‚      â”‚
        â”‚      â”‚  â”‚  Chat v3.1   â”‚  â”‚  VL 235B     â”‚ â”‚      â”‚
        â”‚      â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚      â”‚
        â”‚      â”‚         â”‚                 â”‚         â”‚      â”‚
        â”‚      â”‚         â–¼                 â–¼         â”‚      â”‚
        â”‚      â”‚   {decision: "BUY",  {decision:     â”‚      â”‚
        â”‚      â”‚    confidence: 0.75,  "SELL",       â”‚      â”‚
        â”‚      â”‚    reasoning: "..."} confidence:    â”‚      â”‚
        â”‚      â”‚                       0.65, ...}    â”‚      â”‚
        â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
        â”‚                â”‚               â”‚                  â”‚
        â”‚  2.3 æŠ•ç¥¨å†³ç­– (_compare_decisions)                â”‚
        â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
        â”‚              â”‚         â”‚                â”‚         â”‚
        â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”   â”‚
        â”‚    â”‚ majority  â”‚  â”‚ unanimous   â”‚  â”‚weightedâ”‚   â”‚
        â”‚    â”‚ ç®€å•å¤šæ•°  â”‚  â”‚ å¿…é¡»ä¸€è‡´    â”‚  â”‚ åŠ æƒ   â”‚   â”‚
        â”‚    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜   â”‚
        â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
        â”‚                         â–¼                        â”‚
        â”‚              Final Decision: BUY/SELL/HOLD      â”‚
        â”‚                                                  â”‚
        â”‚  2.4 ç½®ä¿¡åº¦æ£€æŸ¥ (should_execute_decision)        â”‚
        â”‚      - æ£€æŸ¥å¹³å‡ç½®ä¿¡åº¦ >= 0.6 (60%)               â”‚
        â”‚      - HOLD å†³ç­–ä¸æ‰§è¡Œ                           â”‚
        â”‚      â””â”€> å†³å®šæ˜¯å¦æ‰§è¡Œäº¤æ˜“                        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  3. æ‰§è¡Œäº¤æ˜“ (execute_trade) - å¦‚æœåº”è¯¥æ‰§è¡Œ       â”‚
        â”‚                                                    â”‚
        â”‚  æ ¹æ®å†³ç­–ç±»å‹å’Œå½“å‰æŒä»“ï¼š                          â”‚
        â”‚                                                    â”‚
        â”‚  BUY å†³ç­–ï¼š                                        â”‚
        â”‚    - å¦‚æœæœ‰ SHORT æŒä»“ â†’ å¹³ä»“ (close_position)    â”‚
        â”‚    - å¦‚æœæœ‰ LONG æŒä»“ â†’ åŠ ä»“ (stack)              â”‚
        â”‚    - å¦‚æœæ— æŒä»“ â†’ å¼€å¤š (open_long)                â”‚
        â”‚                                                    â”‚
        â”‚  SELL å†³ç­–ï¼š                                       â”‚
        â”‚    - å¦‚æœæœ‰ LONG æŒä»“ â†’ å¹³ä»“ (close_position)     â”‚
        â”‚    - å¦‚æœæœ‰ SHORT æŒä»“ â†’ åŠ ä»“ (stack)             â”‚
        â”‚    - å¦‚æœæ— æŒä»“ â†’ å¼€ç©º (open_short)               â”‚
        â”‚                                                    â”‚
        â”‚  HOLD å†³ç­–ï¼š                                       â”‚
        â”‚    - ä¸æ‰§è¡Œä»»ä½•æ“ä½œ                                â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  4. è®°å½•ä¸é€šçŸ¥                                     â”‚
        â”‚     - ä¿å­˜å†³ç­–åˆ°æ•°æ®åº“ (AIDecision)                â”‚
        â”‚     - ä¿å­˜äº¤æ˜“åˆ°æ•°æ®åº“ (Trade)                     â”‚
        â”‚     - WebSocket å¹¿æ’­ç»™å‰ç«¯                         â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  5. å‘¨æœŸç»“æŸ                                       â”‚
        â”‚     - æ£€æŸ¥æ¸…ç®— (check_liquidations)                â”‚
        â”‚     - ä¿å­˜è´¦æˆ·å¿«ç…§ (AccountSnapshot)               â”‚
        â”‚     - ç­‰å¾…ä¸‹ä¸€ä¸ªå‘¨æœŸ (5åˆ†é’Ÿ)                       â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. AIå†³ç­–æœºåˆ¶è¯¦è§£

### 3.1 è¾“å…¥æ•°æ®ç»“æ„

AI æ¨¡å‹æ¥æ”¶çš„æç¤ºè¯åŒ…å«ï¼š

```
1. äº¤æ˜“ä¸Šä¸‹æ–‡
   - å½“å‰æ—¶é—´ã€äº¤æ˜“æ—¶æ®µ (ç¾æ¬§/äºšæ´²/éé«˜å³°)
   - è´¦æˆ·çŠ¶æ€ (æ€»æƒç›Šã€å¯ç”¨èµ„é‡‘ã€PnLã€ä»“ä½æ•°)
   - å½“å‰æŒä»“ (æ–¹å‘ã€å…¥åœºä»·ã€PnL%ã€ä¿è¯é‡‘ã€æ¸…ç®—ä»·)
   - å†å²å†³ç­– (ä¸Šæ¬¡å†³ç­–ç±»å‹ã€ä»·æ ¼ã€æ˜¯å¦æ‰§è¡Œ)
   - äº¤æ˜“è¡¨ç° (æ€»äº¤æ˜“æ¬¡æ•°ã€èƒœç‡ã€ç›ˆäºç¬”æ•°)

2. æŠ€æœ¯åˆ†æ
   - å½“å‰ä»·æ ¼
   - æŠ€æœ¯æ¨è (BUY/SELL/HOLD)
   - å¤šå¤´ä¿¡å·ç™¾åˆ†æ¯”
   - å…³é”®ä¿¡å·:
     * ç§»åŠ¨å¹³å‡çº¿äº¤å‰
     * MACD (è¶‹åŠ¿åŠ¨é‡)
     * RSI (è¶…ä¹°è¶…å–)
     * å¸ƒæ—å¸¦ (æ³¢åŠ¨åŒºé—´)
     * è¶‹åŠ¿å¼ºåº¦
   - æ”¯æ’‘ä½/é˜»åŠ›ä½ (è·ç¦»ç™¾åˆ†æ¯”)

3. åŸºæœ¬é¢åˆ†æ
   - åŸºæœ¬é¢è¯„åˆ† (0-100)
   - åŸºæœ¬é¢æ¨è
   - ææ…Œè´ªå©ªæŒ‡æ•° (0-100)
   - æ–°é—»æƒ…ç»ª (æ­£é¢/ä¸­æ€§/è´Ÿé¢)
   - ç¤¾äº¤åª’ä½“æŒ‡æ ‡ (Galaxy Score, ç¤¾äº¤é‡, æƒ…ç»ª)

4. å¸‚åœºèƒŒæ™¯
   - BTC å¸‚åœºä¸»å¯¼åœ°ä½
   - æ€»å¸‚å€¼24hå˜åŒ–
```

### 3.2 AI è¾“å‡ºæ ¼å¼

```json
{
  "decision": "BUY" | "SELL" | "HOLD",
  "confidence": 0.0 - 1.0,
  "reasoning": "è¯¦ç»†è§£é‡Š..."
}
```

### 3.3 å†³ç­–é€»è¾‘ï¼ˆAIç†è§£çš„è§„åˆ™ï¼‰

æ ¹æ® `prompt_templates.py:22-45`ï¼ŒAI è¢«å‘ŠçŸ¥ï¼š

```
æœ‰ LONG æŒä»“æ—¶:
  - BUY  â†’ åŠ å¤šä»“ (stack)
  - SELL â†’ å¹³å¤šä»“ (close)
  - HOLD â†’ ä¿æŒæŒä»“

æœ‰ SHORT æŒä»“æ—¶:
  - BUY  â†’ å¹³ç©ºä»“ (close)
  - SELL â†’ åŠ ç©ºä»“ (stack)
  - HOLD â†’ ä¿æŒæŒä»“

æ— æŒä»“æ—¶:
  - BUY  â†’ å¼€å¤š (expect price â†‘)
  - SELL â†’ å¼€ç©º (expect price â†“)
  - HOLD â†’ è§‚æœ›
```

### 3.4 æŠ•ç¥¨ç­–ç•¥

#### Majority (ç®€å•å¤šæ•°ï¼Œé»˜è®¤)

```python
if model_1_decision == model_2_decision:
    # ä¸¤æ¨¡å‹ä¸€è‡´
    if avg_confidence >= 0.6:  # 60% é˜ˆå€¼
        return decision
    else:
        return "HOLD"  # ç½®ä¿¡åº¦ä¸è¶³
else:
    # ä¸¤æ¨¡å‹åˆ†æ­§
    if |conf_1 - conf_2| >= 0.2:  # 20% å·®è·
        return é«˜ç½®ä¿¡åº¦çš„å†³ç­– (å¦‚æœ >= 0.6)
    else:
        return "HOLD"  # ç½®ä¿¡åº¦æ¥è¿‘ï¼Œä¿å®ˆå¤„ç†
```

#### Unanimous (ä¸€è‡´æŠ•ç¥¨)

```python
if model_1_decision == model_2_decision:
    if avg_confidence >= 0.6:
        return decision
    else:
        return "HOLD"
else:
    return "HOLD"  # ä¸ä¸€è‡´å°±ä¸äº¤æ˜“
```

#### Weighted (åŠ æƒæŠ•ç¥¨)

```python
score_1 = conf_1 * weight_1  # é»˜è®¤æƒé‡éƒ½æ˜¯ 0.5
score_2 = conf_2 * weight_2

if model_1_decision == model_2_decision:
    # é€»è¾‘åŒ unanimous
else:
    if |score_1 - score_2| >= 0.15:  # 15% å·®è·
        return é«˜åˆ†å†³ç­– (å¦‚æœç½®ä¿¡åº¦ >= 0.6)
    else:
        return "HOLD"  # åˆ†æ•°æ¥è¿‘
```

### 3.5 æ‰§è¡Œè¿‡æ»¤

å³ä½¿æœ€ç»ˆå†³ç­–æ˜¯ BUY/SELLï¼Œè¿˜éœ€é€šè¿‡ `should_execute_decision()` æ£€æŸ¥ï¼š

```python
if decision == "HOLD":
    return False

# åŒæ¨¡å‹å¯ç”¨
if both_models_available:
    max_confidence = max(æ”¯æŒè¯¥å†³ç­–çš„æ¨¡å‹ç½®ä¿¡åº¦)
    return max_confidence >= 0.6

# å•æ¨¡å‹å¯ç”¨ (å¦ä¸€ä¸ªå¤±è´¥)
else:
    adjusted_threshold = 0.55  # é™ä½ 5%
    return confidence >= adjusted_threshold
```

---

## 4. å½“å‰é…ç½®åˆ†æ

### 4.1 é£é™©é…ç½® âš ï¸

```python
# backend/config/settings.py

LEVERAGE = 20x              # ğŸ”´ æé«˜æ æ†
POSITION_SIZE_PERCENT = 15% # ğŸ”´ æ¯æ¬¡15%èµ„é‡‘
MAX_POSITIONS = 100         # ğŸ”´ æ— é™åˆ¶æŒä»“
COMMISSION_RATE = 0.001     # 0.1% æ‰‹ç»­è´¹
```

**é£é™©è®¡ç®—ï¼š**

```
å•ä»“é£é™©:
  æŠ•å…¥: $10,000 Ã— 15% = $1,500 (ä¿è¯é‡‘)
  æ§åˆ¶: $1,500 Ã— 20x = $30,000 (åä¹‰ä»·å€¼)
  æ¸…ç®—: ä»·æ ¼é€†å‘æ³¢åŠ¨ ~4.5% â†’ å…¨éƒ¨äºæŸ

æœ€å¤§é£é™©:
  ç†è®ºä¸Šå¯ä»¥åŒæ—¶å¼€ 100 ä¸ªä»“ä½ (å®é™…å—èµ„é‡‘é™åˆ¶)
  å¦‚æœå¼€æ»¡ï¼Œ15% Ã— 100 = 1500% (ä¸å¯èƒ½)
  å®é™…çº¦å¯å¼€ 6-7 ä¸ªæ»¡ä»“ (èµ„é‡‘è€—å°½)

è¿é”æ¸…ç®—é£é™©:
  å¦‚æœå¸‚åœºå‰§çƒˆæ³¢åŠ¨ï¼Œå¤šä¸ªä»“ä½åŒæ—¶æ¥è¿‘æ¸…ç®—ä»·
  â†’ æ¸…ç®—ä¸€ä¸ª â†’ èµ„é‡‘å‡å°‘ â†’ å…¶ä»–ä»“ä½marginä¸è¶³ â†’ å…¨éƒ¨æ¸…ç®—
```

### 4.2 äº¤æ˜“å¯¹é…ç½®

```python
# å½“å‰åªäº¤æ˜“ 3 ä¸ªä¸»æµå¸ï¼Œé™ä½ API æˆæœ¬
DEFAULT_PAIRS = [
    "BTC/USDT",
    "ETH/USDT",
    "SOL/USDT"
]

# æ¯5åˆ†é’Ÿå‘¨æœŸ:
# - 3ä¸ªäº¤æ˜“å¯¹ Ã— 2ä¸ªAIæ¨¡å‹ = 6æ¬¡ API è°ƒç”¨
# - é¢„è®¡æˆæœ¬: ~$16/æœˆ
```

### 4.3 AI é…ç½®

```python
AI_MODEL_PRIMARY = "deepseek/deepseek-chat-v3.1"    # ä¾¿å®œã€å¿«é€Ÿ
AI_MODEL_SECONDARY = "qwen/qwen3-vl-235b-a22b-instruct"  # å¤šæ¨¡æ€

TEMPERATURE = 0.7           # ä¸­ç­‰åˆ›é€ æ€§
MAX_TOKENS = 1000           # é™åˆ¶å“åº”é•¿åº¦
API_REQUEST_TIMEOUT = 60s   # å•æ¬¡è¯·æ±‚è¶…æ—¶
DECISION_TIMEOUT = 90s      # æ€»å†³ç­–è¶…æ—¶

MIN_CONFIDENCE = 0.6        # 60% æœ€ä½æ‰§è¡Œé˜ˆå€¼
VOTING_STRATEGY = "majority"
```

---

## 5. é—®é¢˜è¯Šæ–­

### 5.1 å†³ç­–è´¨é‡é—®é¢˜ âŒ

#### é—®é¢˜ 1: AI æ¨¡å‹ä¸é€‚åˆé‡åŒ–äº¤æ˜“

**ç°è±¡ï¼š**
- ä½¿ç”¨é€šç”¨è¯­è¨€æ¨¡å‹ï¼ˆDeepSeek, Qwenï¼‰åšäº¤æ˜“å†³ç­–
- è¿™äº›æ¨¡å‹æ˜¯ä¸ºå¯¹è¯å’Œæ–‡æœ¬ç”Ÿæˆè®¾è®¡çš„ï¼Œä¸æ˜¯ä¸ºé‡‘èäº¤æ˜“ä¼˜åŒ–

**æ ¹æœ¬åŸå› ï¼š**

1. **ç¼ºä¹æ—¶é—´åºåˆ—ä¸“é•¿**
   - LLM æ“…é•¿ç†è§£è¯­è¨€è¯­ä¹‰ï¼Œä¸æ“…é•¿é¢„æµ‹ä»·æ ¼èµ°åŠ¿
   - æ²¡æœ‰ä¸“é—¨è®­ç»ƒå¤„ç†é‡‘èæ—¶é—´åºåˆ—æ•°æ®
   - æ— æ³•æ•æ‰é«˜é¢‘å¸‚åœºåŠ¨æ€

2. **æ¨ç†æˆæœ¬é«˜**
   - æ¯æ¬¡å†³ç­–è°ƒç”¨ä¸¤æ¬¡ AI APIï¼ˆ60-90ç§’ï¼‰
   - å»¶è¿Ÿé«˜ï¼Œåœ¨åŠ å¯†è´§å¸å¿«é€Ÿå¸‚åœºä¸­ååº”æ…¢
   - æˆæœ¬é«˜ï¼ˆè™½ç„¶å·²ä¼˜åŒ–åˆ° $16/æœˆï¼Œä½†æ•ˆæœå¯ç–‘ï¼‰

3. **ç¼ºä¹ä¸€è‡´æ€§**
   - åŒæ ·çš„è¾“å…¥å¯èƒ½äº§ç”Ÿä¸åŒè¾“å‡ºï¼ˆtemperature=0.7ï¼‰
   - éš¾ä»¥å›æµ‹ï¼ˆæ— æ³•å®Œå…¨å¤ç°å†å²å†³ç­–ï¼‰
   - é»‘ç›’å†³ç­–ï¼Œéš¾ä»¥ç†è§£ä¸ºä»€ä¹ˆé€‰æ‹© BUY/SELL

4. **è¿‡åº¦ä¾èµ–æ–‡æœ¬æè¿°**
   - å°†æ•°å€¼æŒ‡æ ‡è½¬æ¢ä¸ºæ–‡æœ¬æè¿°ç»™ AI
   - ä¿¡æ¯å‹ç¼©å’ŒæŸå¤±
   - AI å¯èƒ½å¯¹æ•°å­—ä¸æ•æ„Ÿï¼ˆ"RSI=72" vs "è¶…ä¹°"ï¼‰

#### é—®é¢˜ 2: å†³ç­–ä¿¡å·å†²çªä¸”æ¨¡ç³Š

**ç°è±¡ï¼š**
- æŠ€æœ¯åˆ†ææ¨è BUY
- åŸºæœ¬é¢æ¨è HOLD
- AI å¯èƒ½è¾“å‡ºä»»ä½•ç»“æœ

**é—®é¢˜ï¼š**
```python
# æŠ€æœ¯åˆ†æç»™å‡ºæ˜ç¡®ä¿¡å·
technical_recommendation = "BUY"
bullish_percent = 75%

# åŸºæœ¬é¢åˆ†æç»™å‡ºç›¸åä¿¡å·
fundamental_recommendation = "HOLD"
fear_greed_index = 85 (Extreme Greed)

# AI éœ€è¦"ä¸»è§‚"åˆ¤æ–­æƒé‡
# â†’ ä¸åŒæ¨¡å‹å¯èƒ½åšå‡ºå®Œå…¨ä¸åŒçš„å†³ç­–
# â†’ æŠ•ç¥¨æœºåˆ¶å¯èƒ½äº§ç”Ÿ HOLD (ä¿å®ˆ)
```

**æ”¹è¿›éœ€è¦ï¼š**
- æ˜ç¡®çš„ä¿¡å·ä¼˜å…ˆçº§
- é‡åŒ–çš„æƒé‡åˆ†é…
- å®¢è§‚çš„å†³ç­–è§„åˆ™

#### é—®é¢˜ 3: ç¼ºä¹æœ‰æ•ˆçš„é£é™©ç®¡ç†

**å½“å‰é£é™©ç®¡ç†ï¼š**
```python
# 1. ä»…ä¾é  AI çš„"reasoning"æ¥è€ƒè™‘é£é™©
# 2. æ¸…ç®—ä»·æ ¼è®¡ç®—ï¼ˆè¢«åŠ¨ä¿æŠ¤ï¼‰
# 3. æ²¡æœ‰æ˜ç¡®çš„æ­¢æŸè§„åˆ™

# AI æç¤ºè¯ä¸­æœ‰å»ºè®®:
"- Close losing positions: If P&L is significantly negative (e.g., -5% or worse)"
"- Take profit: If P&L meets target (e.g., +10% or better)"

# ä½†è¿™åªæ˜¯"å»ºè®®"ï¼Œä¸æ˜¯å¼ºåˆ¶è§„åˆ™
# AI å¯ä»¥å¿½ç•¥ï¼Œå¯èƒ½è®©äºæŸæŒç»­æ‰©å¤§
```

**ç¼ºå°‘ï¼š**
- âŒ å¼ºåˆ¶æ­¢æŸ (hard stop-loss)
- âŒ æœ€å¤§å›æ’¤é™åˆ¶
- âŒ æŒä»“æ—¶é—´é™åˆ¶
- âŒ ç›¸å…³æ€§æ£€æŸ¥ï¼ˆé¿å…æ‰€æœ‰ä»“ä½åŒå‘ï¼‰
- âŒ åŠ¨æ€ä»“ä½è°ƒæ•´ï¼ˆæ ¹æ®æ³¢åŠ¨ç‡ï¼‰

#### é—®é¢˜ 4: å›æµ‹å’Œä¼˜åŒ–å›°éš¾

**é—®é¢˜ï¼š**
```python
# 1. AI å†³ç­–ä¸å¯å¤ç°
temperature = 0.7  # éé›¶æ¸©åº¦ = éšæœºæ€§

# 2. æ— æ³•å¿«é€Ÿå›æµ‹
æ¯æ¬¡å†³ç­–éœ€è¦ 60-90 ç§’ï¼ˆAPI è°ƒç”¨ï¼‰
å›æµ‹ 1 å¹´æ•°æ® (5åˆ†é’Ÿå‘¨æœŸ) = 105,120 æ¬¡å†³ç­–
â†’ éœ€è¦ 1752 å°æ—¶ = 73 å¤©ï¼ˆä»… API è°ƒç”¨æ—¶é—´ï¼‰

# 3. æ— æ³•å‚æ•°ä¼˜åŒ–
æ— æ³•è°ƒæ•´"å‚æ•°"ï¼ˆAI æ˜¯é»‘ç›’ï¼‰
æ— æ³•ç”¨ç½‘æ ¼æœç´¢æ‰¾æœ€ä¼˜ç­–ç•¥

# 4. éš¾ä»¥è¯Šæ–­å¤±è´¥åŸå› 
"reasoning" æ˜¯è‡ªç„¶è¯­è¨€ï¼Œä¸æ˜¯ç»“æ„åŒ–æ•°æ®
éš¾ä»¥ç»Ÿè®¡åˆ†æå“ªäº›å†³ç­–ç±»å‹è¡¨ç°å¥½
```

### 5.2 æ¶æ„é—®é¢˜

#### é—®é¢˜ 5: æŠ€æœ¯åˆ†ææœªå……åˆ†åˆ©ç”¨

**ç°è±¡ï¼š**
```python
# technical_analyzer.py è®¡ç®—äº†å¤§é‡æŒ‡æ ‡:
- MA (10, 20, 50, 100, 200)
- EMA (12, 26, 50, 200)
- MACD
- RSI
- Bollinger Bands
- ATR

# ä½†è¿™äº›åªæ˜¯è½¬æ¢æˆæ–‡æœ¬æè¿°ä¼ ç»™ AI
# AI å¯èƒ½æ— æ³•æ­£ç¡®è§£è¯»æ•°å€¼å…³ç³»
```

**æ”¹è¿›æ–¹å‘ï¼š**
- ç›´æ¥ç”¨æŠ€æœ¯æŒ‡æ ‡ç”Ÿæˆäº¤æ˜“ä¿¡å·
- ç”¨æœºå™¨å­¦ä¹ æ¨¡å‹ï¼ˆè€Œé LLMï¼‰å¤„ç†

#### é—®é¢˜ 6: 5åˆ†é’Ÿå‘¨æœŸå¯èƒ½ä¸åˆé€‚

```python
AI_SCHEDULER_INTERVAL_MINUTES = 5

# é—®é¢˜:
# 1. å¯¹äºé«˜é¢‘ç­–ç•¥ï¼Œ5åˆ†é’Ÿå¤ªæ…¢
# 2. å¯¹äºè¶‹åŠ¿ç­–ç•¥ï¼Œ5åˆ†é’Ÿå¯èƒ½è¿‡äºé¢‘ç¹
# 3. æ¯æ¬¡è°ƒç”¨ AI éœ€è¦ 60-90 ç§’
#    â†’ å®é™…ä¸Šæ˜¯ 4-4.5 åˆ†é’Ÿçš„å»¶è¿Ÿå†³ç­–

# åŠ å¯†è´§å¸å¸‚åœºæ³¢åŠ¨å¿«
# å½“ä½ åšå‡ºå†³ç­–æ—¶ï¼Œå¸‚åœºå¯èƒ½å·²ç»å˜åŒ–
```

---

## 6. ä¸ä¸“ä¸šé‡åŒ–äº¤æ˜“å¯¹æ¯”

### 6.1 ä¸“ä¸šé‡åŒ–äº¤æ˜“ç³»ç»Ÿç‰¹ç‚¹

| ç»´åº¦ | ä¸“ä¸šé‡åŒ–ç³»ç»Ÿ | å½“å‰ AutoTrade ç³»ç»Ÿ |
|------|------------|------------------|
| **å†³ç­–æ¨¡å‹** | ç»Ÿè®¡æ¨¡å‹ã€æœºå™¨å­¦ä¹ ã€æ·±åº¦å­¦ä¹  (LSTM, Transformer) | é€šç”¨ LLM (DeepSeek, Qwen) |
| **å†³ç­–é€Ÿåº¦** | å¾®ç§’åˆ°æ¯«ç§’çº§ | 60-90 ç§’ï¼ˆAI API è°ƒç”¨ï¼‰ |
| **å›æµ‹èƒ½åŠ›** | å¿«é€Ÿå®Œæ•´å›æµ‹ï¼ˆç§’çº§å®Œæˆå¹´åº¦æ•°æ®ï¼‰ | æ— æ³•æœ‰æ•ˆå›æµ‹ï¼ˆAPI æˆæœ¬å’Œæ—¶é—´ï¼‰ |
| **å‚æ•°ä¼˜åŒ–** | ç½‘æ ¼æœç´¢ã€è´å¶æ–¯ä¼˜åŒ–ã€é—ä¼ ç®—æ³• | æ— æ³•å‚æ•°ä¼˜åŒ–ï¼ˆé»‘ç›’ AIï¼‰ |
| **é£é™©ç®¡ç†** | å¤šå±‚é£é™©æ§åˆ¶ï¼ˆä»“ä½ã€æ æ†ã€æ­¢æŸã€VaRï¼‰ | åŸºæœ¬æ¸…ç®—ä¿æŠ¤ + AI "å»ºè®®" |
| **æ‰§è¡Œç­–ç•¥** | é«˜é¢‘äº¤æ˜“ã€å¥—åˆ©ã€åšå¸‚ã€ç»Ÿè®¡å¥—åˆ© | 5åˆ†é’Ÿå‘¨æœŸçš„æ–¹å‘æ€§äº¤æ˜“ |
| **æ•°æ®å¤„ç†** | å®æ—¶æµå¤„ç†ã€ä½å»¶è¿Ÿ | æ‰¹é‡è·å–ã€é«˜å»¶è¿Ÿ |
| **å¯è§£é‡Šæ€§** | æ˜ç¡®çš„æ•°å­¦å…¬å¼å’Œé€»è¾‘ | AI é»‘ç›’æ¨ç† |
| **ä¸€è‡´æ€§** | ç¡®å®šæ€§ç®—æ³•ï¼ˆå¯å¤ç°ï¼‰ | éšæœºæ€§ï¼ˆtemperature > 0ï¼‰ |

### 6.2 å…¸å‹é‡åŒ–ç­–ç•¥ç±»å‹

#### 1. è¶‹åŠ¿è·Ÿè¸ª (Trend Following)
```python
# åŸç†: ä»·æ ¼æœ‰æƒ¯æ€§ï¼Œè¶‹åŠ¿ä¼šå»¶ç»­
# ä¿¡å·:
if MA_short > MA_long:
    signal = "BUY"  # ä¸Šå‡è¶‹åŠ¿
elif MA_short < MA_long:
    signal = "SELL"  # ä¸‹é™è¶‹åŠ¿

# ç‰¹ç‚¹:
# - ç®€å•ã€æœ‰æ•ˆ
# - åœ¨è¶‹åŠ¿å¸‚åœºè¡¨ç°å¥½
# - åœ¨éœ‡è¡å¸‚åœºäºæŸ
# - ä¸éœ€è¦ AI
```

#### 2. å‡å€¼å›å½’ (Mean Reversion)
```python
# åŸç†: ä»·æ ¼åç¦»å‡å€¼åä¼šå›å½’
# ä¿¡å·:
if price < BB_lower:
    signal = "BUY"  # è¶…å–ï¼Œé¢„æœŸåå¼¹
elif price > BB_upper:
    signal = "SELL"  # è¶…ä¹°ï¼Œé¢„æœŸå›è°ƒ

# ç‰¹ç‚¹:
# - é€‚åˆéœ‡è¡å¸‚åœº
# - è¶‹åŠ¿å¸‚åœºä¸­å±é™©
# - éœ€è¦å¿«é€Ÿæ­¢æŸ
```

#### 3. å¥—åˆ© (Arbitrage)
```python
# åŸç†: åˆ©ç”¨ä¸åŒå¸‚åœº/æ—¶é—´çš„ä»·å·®
# ç¤ºä¾‹:
if price_binance < price_kraken * (1 - fee * 2):
    # ä¹° Binanceï¼Œå– Kraken
    profit = price_diff - fees

# ç‰¹ç‚¹:
# - ä½é£é™©
# - éœ€è¦å¿«é€Ÿæ‰§è¡Œï¼ˆæ¯«ç§’çº§ï¼‰
# - å½“å‰ç³»ç»Ÿæ— æ³•å®ç°ï¼ˆå¤ªæ…¢ï¼‰
```

#### 4. æœºå™¨å­¦ä¹ ç­–ç•¥
```python
# ä½¿ç”¨ LSTM/Transformer é¢„æµ‹ä»·æ ¼æ–¹å‘
# ç‰¹å¾å·¥ç¨‹:
features = [
    price_returns,
    volume_changes,
    technical_indicators,
    market_sentiment,
    order_book_imbalance
]

# è®­ç»ƒ:
model = LSTM(...)
model.fit(historical_data, labels)

# é¢„æµ‹:
prediction = model.predict(current_features)
if prediction > threshold:
    signal = "BUY"
```

### 6.3 ä¸ºä»€ä¹ˆé‡åŒ–äº¤æ˜“ä¸å¸¸ç”¨ LLMï¼Ÿ

**åŸå› ï¼š**

1. **äº¤æ˜“æ˜¯æ•°å€¼é—®é¢˜ï¼Œä¸æ˜¯è¯­è¨€é—®é¢˜**
   - ä»·æ ¼é¢„æµ‹éœ€è¦ç²¾ç¡®çš„æ•°å­¦å»ºæ¨¡
   - LLM æ“…é•¿ç†è§£è¯­ä¹‰ï¼Œä¸æ“…é•¿æ•°å€¼è®¡ç®—

2. **é€Ÿåº¦è¦æ±‚**
   - é‡åŒ–äº¤æ˜“éœ€è¦å¿«é€Ÿååº”ï¼ˆæ¯«ç§’çº§ï¼‰
   - LLM æ¨ç†æ…¢ï¼ˆç§’çº§ï¼‰

3. **æˆæœ¬æ•ˆç›Š**
   - æ¯æ¬¡å†³ç­–è°ƒç”¨ API æˆæœ¬é«˜
   - ä¼ ç»Ÿç®—æ³•å‡ ä¹é›¶æˆæœ¬

4. **å¯å›æµ‹æ€§**
   - é‡åŒ–ç­–ç•¥å¿…é¡»å¯å›æµ‹ä»¥éªŒè¯æœ‰æ•ˆæ€§
   - LLM æœ‰éšæœºæ€§ï¼Œéš¾ä»¥å¤ç°

5. **ç›‘ç®¡å’Œå®¡è®¡**
   - é‡‘èäº¤æ˜“éœ€è¦å¯è§£é‡Šæ€§
   - LLM æ˜¯é»‘ç›’ï¼Œéš¾ä»¥è§£é‡Šä¸ºä»€ä¹ˆåšå‡ºæŸå†³ç­–

**LLM å¯èƒ½é€‚ç”¨çš„åœºæ™¯ï¼š**
- âœ… æ–°é—»æƒ…ç»ªåˆ†æï¼ˆç†è§£æ–‡æœ¬ï¼‰
- âœ… è´¢æŠ¥è§£è¯»ï¼ˆæå–å…³é”®ä¿¡æ¯ï¼‰
- âœ… ç¤¾äº¤åª’ä½“æƒ…ç»ªï¼ˆç†è§£è¯­å¢ƒï¼‰
- âŒ ç›´æ¥äº¤æ˜“å†³ç­–ï¼ˆå½“å‰ç”¨æ³•ï¼‰

---

## 7. æ”¹è¿›å»ºè®®

### 7.1 çŸ­æœŸæ”¹è¿›ï¼ˆä¿æŒå½“å‰æ¶æ„ï¼‰

#### 1. é™ä½é£é™©é…ç½® ğŸ”´ **æœ€é«˜ä¼˜å…ˆçº§**

```python
# å½“å‰é…ç½®æåº¦å±é™©
LEVERAGE = 20x              # â†’ å»ºè®®æ”¹ä¸º 3-5x
POSITION_SIZE_PERCENT = 15% # â†’ å»ºè®®æ”¹ä¸º 5-10%
MAX_POSITIONS = 100         # â†’ å»ºè®®æ”¹ä¸º 3-5

# ä¿å®ˆé…ç½®ç¤ºä¾‹:
LEVERAGE = 3
POSITION_SIZE_PERCENT = 5
MAX_POSITIONS = 3

# é£é™©è®¡ç®—:
# å•ä»“: $10,000 Ã— 5% Ã— 3x = $1,500 åä¹‰ä»·å€¼
# æ¸…ç®—: éœ€è¦é€†å‘ ~30% (vs å½“å‰ 4.5%)
# æœ€å¤§é£é™©: 3ä»“ Ã— 5% = 15% (vs å½“å‰ >100%)
```

#### 2. æ·»åŠ å¼ºåˆ¶é£é™©æ§åˆ¶

```python
# åœ¨ TradingEngine.close_position() åæ·»åŠ è‡ªåŠ¨æ­¢æŸæ£€æŸ¥

def check_stop_loss_take_profit(self, current_prices):
    """æ¯æ¬¡å†³ç­–å‘¨æœŸå‰æ£€æŸ¥æ­¢æŸæ­¢ç›ˆ"""
    for symbol, position in list(self.positions.items()):
        current_price = current_prices.get(symbol)
        if not current_price:
            continue

        pnl_percent = position.update_unrealized_pnl(current_price) / position.margin * 100

        # æ­¢æŸ: -10%
        if pnl_percent <= -10:
            log_error(f"Stop Loss triggered: {symbol} at {pnl_percent:.2f}%")
            self.close_position(symbol, current_price, reason="Stop Loss (-10%)")

        # æ­¢ç›ˆ: +20%
        elif pnl_percent >= 20:
            log_success(f"Take Profit triggered: {symbol} at {pnl_percent:.2f}%")
            self.close_position(symbol, current_price, reason="Take Profit (+20%)")
```

#### 3. æ”¹è¿›æŠ•ç¥¨ç­–ç•¥

```python
# æ·»åŠ æŠ€æœ¯æŒ‡æ ‡çš„ç›´æ¥æŠ•ç¥¨

def _enhanced_voting(self, model_1, model_2, technical_signal, fundamental_signal):
    """
    å››æ–¹æŠ•ç¥¨: Model1, Model2, Technical, Fundamental
    """
    votes = {
        "BUY": 0,
        "SELL": 0,
        "HOLD": 0
    }

    # AI æ¨¡å‹æŠ•ç¥¨ï¼ˆæƒé‡ 0.3 eachï¼‰
    if model_1:
        votes[model_1['decision']] += 0.3 * model_1['confidence']
    if model_2:
        votes[model_2['decision']] += 0.3 * model_2['confidence']

    # æŠ€æœ¯æŒ‡æ ‡æŠ•ç¥¨ï¼ˆæƒé‡ 0.25ï¼‰
    votes[technical_signal] += 0.25

    # åŸºæœ¬é¢æŠ•ç¥¨ï¼ˆæƒé‡ 0.15ï¼‰
    votes[fundamental_signal] += 0.15

    # æœ€é«˜åˆ†èƒœå‡ºï¼Œä½†éœ€è¦è¶…è¿‡é˜ˆå€¼
    winner = max(votes, key=votes.get)
    if votes[winner] >= 0.5:  # 50% æ”¯æŒåº¦
        return winner
    else:
        return "HOLD"
```

#### 4. å¢åŠ å†³ç­–å‘¨æœŸ

```python
# ä» 5 åˆ†é’Ÿæ”¹ä¸º 15-30 åˆ†é’Ÿ
AI_SCHEDULER_INTERVAL_MINUTES = 15

# åŸå› :
# 1. å‡å°‘ API æˆæœ¬
# 2. ç»™ AI æ›´å¤šæ—¶é—´å¤„ç†ï¼ˆå‡å°‘è¶…æ—¶ï¼‰
# 3. é¿å…è¿‡åº¦äº¤æ˜“
# 4. æ›´é€‚åˆè¶‹åŠ¿ç­–ç•¥
```

### 7.2 ä¸­æœŸæ”¹è¿›ï¼ˆæ··åˆæ–¹æ¡ˆï¼‰

#### 1. å¼•å…¥ä¼ ç»ŸæŠ€æœ¯æŒ‡æ ‡ç­–ç•¥ä½œä¸ºä¸»è¦ä¿¡å·æº

```python
class HybridStrategy:
    """
    æ··åˆç­–ç•¥: æŠ€æœ¯æŒ‡æ ‡ + AI éªŒè¯
    """

    def get_technical_signal(self, df):
        """åŸºäºæŠ€æœ¯æŒ‡æ ‡ç”Ÿæˆä¸»ä¿¡å·"""
        latest = df.iloc[-1]

        # è¶‹åŠ¿ä¿¡å·
        if latest['ema_12'] > latest['ema_26'] and latest['rsi'] < 70:
            trend_signal = "BUY"
        elif latest['ema_12'] < latest['ema_26'] and latest['rsi'] > 30:
            trend_signal = "SELL"
        else:
            trend_signal = "HOLD"

        # åŠ¨é‡ç¡®è®¤
        macd_signal = "BUY" if latest['macd'] > latest['macd_signal'] else "SELL"

        # è¶…ä¹°è¶…å–
        rsi_signal = "SELL" if latest['rsi'] > 70 else ("BUY" if latest['rsi'] < 30 else "HOLD")

        # ç»„åˆåˆ¤æ–­
        signals = [trend_signal, macd_signal, rsi_signal]
        buy_count = signals.count("BUY")
        sell_count = signals.count("SELL")

        if buy_count >= 2:
            return "BUY", 0.7 + (buy_count - 2) * 0.1
        elif sell_count >= 2:
            return "SELL", 0.7 + (sell_count - 2) * 0.1
        else:
            return "HOLD", 0.5

    def make_decision(self, symbol, df, technical_summary, fundamental_analysis):
        """AI ä½œä¸ºéªŒè¯å±‚ï¼Œè€Œéä¸»å†³ç­–å±‚"""
        # 1. æŠ€æœ¯æŒ‡æ ‡ç”Ÿæˆä¸»ä¿¡å·
        tech_signal, tech_confidence = self.get_technical_signal(df)

        # 2. å¦‚æœæŠ€æœ¯ä¿¡å·æ˜¯ HOLDï¼Œç›´æ¥è¿”å›
        if tech_signal == "HOLD":
            return "HOLD", tech_confidence, "No clear technical setup"

        # 3. æŠ€æœ¯ä¿¡å·æ˜ç¡®æ—¶ï¼Œè¯¢é—® AI æ˜¯å¦åŒæ„
        ai_decision = self.ask_ai_confirmation(
            symbol, tech_signal, tech_confidence,
            technical_summary, fundamental_analysis
        )

        # 4. AI å’ŒæŠ€æœ¯ä¿¡å·ä¸€è‡´ â†’ æ‰§è¡Œ
        if ai_decision['decision'] == tech_signal:
            final_confidence = (tech_confidence + ai_decision['confidence']) / 2
            return tech_signal, final_confidence, f"Tech + AI agree: {ai_decision['reasoning']}"
        else:
            # AI ä¸åŒæ„ â†’ ä¿å®ˆå¤„ç†
            return "HOLD", 0.5, f"Tech={tech_signal} but AI={ai_decision['decision']}, holding"
```

**ä¼˜åŠ¿ï¼š**
- âœ… æŠ€æœ¯æŒ‡æ ‡å¿«é€Ÿã€ç¡®å®šæ€§
- âœ… AI ä½œä¸º"è¿‡æ»¤å™¨"ï¼Œé¿å…å‡ä¿¡å·
- âœ… å‡å°‘ AI API è°ƒç”¨æ¬¡æ•°
- âœ… å¯å›æµ‹ï¼ˆæŠ€æœ¯éƒ¨åˆ†ç¡®å®šæ€§ï¼‰

#### 2. ä½¿ç”¨è½»é‡çº§æœ¬åœ°æ¨¡å‹

```python
# æ›¿ä»£æ–¹æ¡ˆ: ä½¿ç”¨æœ¬åœ°çš„å°å‹åˆ†ç±»æ¨¡å‹

from sklearn.ensemble import RandomForestClassifier
import joblib

class LocalMLStrategy:
    """
    æœ¬åœ°æœºå™¨å­¦ä¹ æ¨¡å‹ - å¿«é€Ÿã€å¯å›æµ‹
    """

    def train_model(self, historical_data):
        """è®­ç»ƒåˆ†ç±»å™¨é¢„æµ‹ä»·æ ¼æ–¹å‘"""
        # ç‰¹å¾å·¥ç¨‹
        features = self._extract_features(historical_data)
        labels = self._generate_labels(historical_data)  # 1=up, -1=down, 0=neutral

        # è®­ç»ƒéšæœºæ£®æ—
        self.model = RandomForestClassifier(
            n_estimators=100,
            max_depth=10,
            random_state=42
        )
        self.model.fit(features, labels)

        # ä¿å­˜æ¨¡å‹
        joblib.dump(self.model, 'models/rf_model.pkl')

    def _extract_features(self, df):
        """æå–ç‰¹å¾"""
        return df[[
            'rsi', 'macd', 'macd_signal',
            'bb_upper', 'bb_lower',
            'ema_12', 'ema_26',
            'volume_ma_ratio',
            'price_change_1h',
            'price_change_4h'
        ]].values

    def predict(self, current_features):
        """é¢„æµ‹"""
        prediction = self.model.predict([current_features])[0]
        probability = self.model.predict_proba([current_features])[0]

        if prediction == 1:
            return "BUY", probability[1]
        elif prediction == -1:
            return "SELL", probability[0]
        else:
            return "HOLD", max(probability)
```

**ä¼˜åŠ¿ï¼š**
- âœ… æ¯«ç§’çº§å†³ç­–
- âœ… æ—  API æˆæœ¬
- âœ… å¯å¿«é€Ÿå›æµ‹
- âœ… å¯å‚æ•°ä¼˜åŒ–
- âœ… å¯è§£é‡Šæ€§ï¼ˆç‰¹å¾é‡è¦æ€§ï¼‰

### 7.3 é•¿æœŸæ”¹è¿›ï¼ˆé‡æ„ä¸ºä¸“ä¸šé‡åŒ–ç³»ç»Ÿï¼‰

#### æ¶æ„æ”¹è¿›è·¯çº¿å›¾

```
Phase 1: é£é™©æ§åˆ¶ï¼ˆ1-2å‘¨ï¼‰
  â”œâ”€ é™ä½æ æ†å’Œä»“ä½
  â”œâ”€ æ·»åŠ æ­¢æŸæ­¢ç›ˆ
  â””â”€ æœ€å¤§å›æ’¤ä¿æŠ¤

Phase 2: æ··åˆç­–ç•¥ï¼ˆ2-4å‘¨ï¼‰
  â”œâ”€ æŠ€æœ¯æŒ‡æ ‡ä¸»å¯¼
  â”œâ”€ AI è¾…åŠ©éªŒè¯
  â””â”€ å›æµ‹æ¡†æ¶æ­å»º

Phase 3: æœ¬åœ° ML æ¨¡å‹ï¼ˆ4-8å‘¨ï¼‰
  â”œâ”€ ç‰¹å¾å·¥ç¨‹ä¼˜åŒ–
  â”œâ”€ å¤šæ¨¡å‹é›†æˆ
  â”œâ”€ å‚æ•°ä¼˜åŒ–ç®¡é“
  â””â”€ è‡ªåŠ¨å†è®­ç»ƒ

Phase 4: é«˜çº§ç­–ç•¥ï¼ˆ8-12å‘¨ï¼‰
  â”œâ”€ å¤šæ—¶é—´æ¡†æ¶åˆ†æ
  â”œâ”€ ç»„åˆä¼˜åŒ–
  â”œâ”€ å¸‚åœºåˆ¶åº¦è¯†åˆ«
  â””â”€ è‡ªé€‚åº”å‚æ•°è°ƒæ•´

Phase 5: ç”Ÿäº§çº§ä¼˜åŒ–ï¼ˆæŒç»­ï¼‰
  â”œâ”€ ä½å»¶è¿Ÿæ•°æ®æµ
  â”œâ”€ å®ç›˜äº¤æ˜“æ¥å£
  â”œâ”€ ç›‘æ§å’Œå‘Šè­¦ç³»ç»Ÿ
  â””â”€ åˆè§„å’Œå®¡è®¡
```

#### æ¨èçš„æŠ€æœ¯æ ˆ

```python
# æ•°æ®å¤„ç†
pandas, numpy, polars  # å¿«é€Ÿæ•°æ®å¤„ç†

# æŠ€æœ¯åˆ†æ
ta-lib, pandas-ta  # æŠ€æœ¯æŒ‡æ ‡åº“

# æœºå™¨å­¦ä¹ 
scikit-learn  # ä¼ ç»Ÿ ML
xgboost, lightgbm  # æ¢¯åº¦æå‡
pytorch, tensorflow  # æ·±åº¦å­¦ä¹  (LSTM, Transformer)

# å›æµ‹å¼•æ“
backtrader, vectorbt, zipline  # ä¸“ä¸šå›æµ‹æ¡†æ¶

# é£é™©ç®¡ç†
pyfolio  # é£é™©åˆ†æ
empyrical  # æ€§èƒ½æŒ‡æ ‡

# å®æ—¶äº¤æ˜“
ccxt  # äº¤æ˜“æ‰€ API
freqtrade  # å¼€æºäº¤æ˜“æœºå™¨äººæ¡†æ¶
```

---

## æ€»ç»“

### å½“å‰ç³»ç»Ÿè¯„ä¼°

**ä¼˜ç‚¹ï¼š**
- âœ… å®Œæ•´çš„ç«¯åˆ°ç«¯ç³»ç»Ÿï¼ˆå‰åç«¯ã€æ•°æ®åº“ã€APIï¼‰
- âœ… è‰¯å¥½çš„ä»£ç ç»„ç»‡å’Œæ–‡æ¡£
- âœ… åŒæ¨¡å‹éªŒè¯æœºåˆ¶ï¼ˆæé«˜å†³ç­–ç¨³å®šæ€§ï¼‰
- âœ… æŒä»“æ¢å¤æœºåˆ¶ï¼ˆåº”å¯¹é‡å¯ï¼‰
- âœ… å®æ—¶ WebSocket æ›´æ–°

**ä¸»è¦é—®é¢˜ï¼š**
- ğŸ”´ **æé«˜é£é™©é…ç½®**ï¼ˆ20x æ æ† + 15% ä»“ä½ + æ— é™æŒä»“ï¼‰
- ğŸ”´ **AI æ¨¡å‹ä¸é€‚åˆé‡åŒ–äº¤æ˜“**ï¼ˆé€Ÿåº¦æ…¢ã€æˆæœ¬é«˜ã€ä¸å¯å›æµ‹ï¼‰
- ğŸŸ¡ æŠ€æœ¯åˆ†ææœªå……åˆ†åˆ©ç”¨ï¼ˆåªæ˜¯æ–‡æœ¬è¾“å…¥ç»™ AIï¼‰
- ğŸŸ¡ ç¼ºä¹å¼ºåˆ¶é£é™©ç®¡ç†ï¼ˆæ­¢æŸæ­¢ç›ˆï¼‰
- ğŸŸ¡ å†³ç­–å»¶è¿Ÿé«˜ï¼ˆ60-90ç§’ï¼‰

### å…³é”®å»ºè®®

1. **ç«‹å³é™ä½é£é™©é…ç½®** ğŸ”´
   - æ æ†: 20x â†’ 3-5x
   - ä»“ä½: 15% â†’ 5-10%
   - æŒä»“æ•°: 100 â†’ 3-5

2. **æ·»åŠ å¼ºåˆ¶æ­¢æŸæ­¢ç›ˆ**
   - æ­¢æŸ: -10%
   - æ­¢ç›ˆ: +20%
   - æœ€å¤§å›æ’¤: -30%

3. **æ”¹ç”¨æ··åˆç­–ç•¥**
   - æŠ€æœ¯æŒ‡æ ‡ä¸»å¯¼å†³ç­–
   - AI ä½œä¸ºéªŒè¯å’Œè¿‡æ»¤å™¨
   - ä¿ç•™å½“å‰åŸºç¡€è®¾æ–½

4. **é•¿æœŸè€ƒè™‘é‡æ„**
   - å¼•å…¥æœ¬åœ° ML æ¨¡å‹
   - ä¸“ä¸šå›æµ‹æ¡†æ¶
   - å‚æ•°ä¼˜åŒ–ç®¡é“

### å…³äº"é‡åŒ–äº¤æ˜“éƒ½æ˜¯å¦‚æ­¤å—ï¼Ÿ"

**å›ç­”ï¼šä¸æ˜¯ã€‚**

ä¸“ä¸šé‡åŒ–äº¤æ˜“ç³»ç»Ÿï¼š
- âŒ ä¸ä½¿ç”¨é€šç”¨ LLM åšç›´æ¥äº¤æ˜“å†³ç­–
- âŒ ä¸ä¾èµ– 60-90 ç§’çš„å»¶è¿Ÿå†³ç­–
- âœ… ä½¿ç”¨æ•°å­¦æ¨¡å‹ã€ç»Ÿè®¡æ¨¡å‹ã€æœºå™¨å­¦ä¹ 
- âœ… å¾®ç§’åˆ°æ¯«ç§’çº§å†³ç­–
- âœ… å¯å›æµ‹ã€å¯ä¼˜åŒ–ã€å¯è§£é‡Š
- âœ… å¤šå±‚é£é™©æ§åˆ¶

å½“å‰ç³»ç»Ÿæ›´åƒæ˜¯"AI å®éªŒ"ï¼Œè€Œé"é‡åŒ–äº¤æ˜“ç³»ç»Ÿ"ã€‚è¦æˆä¸ºçœŸæ­£çš„é‡åŒ–ç³»ç»Ÿï¼Œéœ€è¦å‘ä¼ ç»Ÿé‡åŒ–æ–¹æ³•é æ‹¢ï¼ŒAI åº”è¯¥è¾…åŠ©è€Œéä¸»å¯¼ã€‚

---

**æ–‡æ¡£ç‰ˆæœ¬ï¼š** v1.0
**ä½œè€…ï¼š** Claude (Anthropic)
**æœ€åæ›´æ–°ï¼š** 2025-11-07
